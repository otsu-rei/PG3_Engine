#pragma once

//-----------------------------------------------------------------------------------------
// include
//-----------------------------------------------------------------------------------------
//* DXROBJECT
#include "DxrObjectCommon.h"

//* DXOBJECT
#include <Engine/System/DirectX/DxObject/DxDevice.h>

////////////////////////////////////////////////////////////////////////////////////////////
// DXROBJECT namespace
////////////////////////////////////////////////////////////////////////////////////////////
_DXROBJECT_NAMESPACE_BEGIN

////////////////////////////////////////////////////////////////////////////////////////////
// ShaderTable class
////////////////////////////////////////////////////////////////////////////////////////////
class ShaderTable {
public:

	////////////////////////////////////////////////////////////////////////////////////////////
	// RecorderSize structure
	////////////////////////////////////////////////////////////////////////////////////////////
	struct RecorderSize {

		//* member *//

		UINT raygeneration;
		UINT miss;
		UINT hitgroup;

		//* methods *//

		void AlignmentRecoder(UINT align);

	};

public:

	//=========================================================================================
	// public methods
	//=========================================================================================

	ShaderTable()  = default;
	~ShaderTable() = default;

	void Init(DxObject::Device* device);

	void Register();

private:

	//=========================================================================================
	// private variables
	//=========================================================================================

	ComPtr<ID3D12Resource> resource_;

	static const size_t kShaderTableSize = 0x10000; //!< 仮設定 64KB

};

_DXROBJECT_NAMESPACE_END
